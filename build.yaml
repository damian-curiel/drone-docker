#YAML simple de construcci√≥n


kind: pipeline
type: docker
name: Prueba para clip
steps:
- name: maven build with dind
  image: maven:3-jdk-10
  volumes:
  - name: dockersock
    path: /var/run
  commands:
  - sleep 15 # give docker enough time to start
  - mvn -B -DskipTests clean package
  - docker ps -a
  - mvn test
#Dockerfile y app se toma de app basada en go
- name: Push a Docker Registry
  image: plugins/docker
  settings:
    repo: fcuriel/drone
    auto_tag: true
    username: fcuriel
    password:
      from_secret: docker_pwd_damian
services:
- name: docker
  image: docker:dind
  privileged: true
  volumes:
  - name: dockersock
    path: /var/run

volumes:
- name: dockersock
  temp: {}